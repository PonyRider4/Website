<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-web/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ’¸</text></svg>">
    
    <meta name="description" content="Soft Wealth æ˜¯ä¸€ä¸ªä¸“æ³¨äº Aè‚¡é‡åŒ–äº¤æ˜“ã€Python è‡ªåŠ¨åŒ–è„šæœ¬å¼€å‘ä»¥åŠæ•°å­—æ¸¸æ°‘ç”Ÿæ´»æ–¹å¼åˆ†äº«çš„ä¸ªäººåšå®¢ã€‚">
    <meta property="og:title" content="Soft Wealth | èˆ’é€‚çš„æé’±å“²å­¦">
    <meta property="og:type" content="website">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soft Wealth | èˆ’é€‚çš„æé’±å“²å­¦</title>
    
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        // ä¼˜å…ˆä½¿ç”¨æ–‡æ¥·ï¼Œè‹±æ–‡ä½¿ç”¨ Inter
                        sans: ['Inter', '"LXGW WenKai Screen"', 'system-ui', '-apple-system', 'sans-serif'],
                        serif: ['"LXGW WenKai Screen"', 'serif'],
                    },
                    colors: { primary: '#6366f1', secondary: '#ec4899', dark: '#0f172a', light: '#f8fafc' },
                    animation: { 'fade-in-up': 'fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1)', 'blob': 'blob 10s infinite', 'cursor': 'cursor .75s step-end infinite' },
                    keyframes: { 
                        fadeInUp: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        blob: { '0%': { transform: 'translate(0px, 0px) scale(1)' }, '33%': { transform: 'translate(30px, -50px) scale(1.1)' }, '66%': { transform: 'translate(-20px, 20px) scale(0.9)' }, '100%': { transform: 'translate(0px, 0px) scale(1)' } },
                        cursor: { '0%, 100%': { borderColor: 'transparent' }, '50%': { borderColor: 'currentColor' } }
                    },
                    typography: (theme) => ({
                        DEFAULT: {
                            css: {
                                color: '#334155', // slate-700
                                fontFamily: '"LXGW WenKai Screen", sans-serif',
                                lineHeight: '1.8', // å¢åŠ è¡Œé«˜ï¼Œé˜…è¯»æ›´èˆ’é€‚
                                'h1, h2, h3, h4': { color: '#1e293b', fontWeight: '700', letterSpacing: '-0.025em', marginTop: '1.5em', marginBottom: '0.8em' },
                                blockquote: { 
                                    borderLeftColor: '#6366f1', 
                                    backgroundColor: 'rgba(99, 102, 241, 0.05)', 
                                    fontStyle: 'normal', 
                                    padding: '1rem',
                                    borderRadius: '0.5rem',
                                    quotes: 'none'
                                },
                                code: { color: '#ec4899', backgroundColor: 'rgba(236, 72, 153, 0.1)', padding: '0.2em 0.4em', borderRadius: '0.25rem', fontWeight: '600' },
                                'code::before': { content: '""' },
                                'code::after': { content: '""' },
                                // ä¼˜åŒ–è¡¨æ ¼æ ·å¼
                                table: { width: '100%', marginTop: '2em', marginBottom: '2em', borderRadius: '0.5rem', overflow: 'hidden', borderCollapse: 'collapse' },
                                'thead th': { backgroundColor: '#f1f5f9', padding: '0.75rem', color: '#475569', textAlign: 'left', borderBottom: '2px solid #e2e8f0' },
                                'tbody td': { padding: '0.75rem', borderBottom: '1px solid #e2e8f0' },
                                'tbody tr:nth-child(even)': { backgroundColor: '#f8fafc' },
                            }
                        },
                        dark: {
                            css: {
                                color: '#94a3b8',
                                'h1, h2, h3, h4': { color: '#f8fafc' },
                                'thead th': { backgroundColor: '#1e293b', color: '#cbd5e1', borderBottomColor: '#334155' },
                                'tbody td': { borderBottomColor: '#334155' },
                                'tbody tr:nth-child(even)': { backgroundColor: '#1e293b' },
                                blockquote: { backgroundColor: 'rgba(99, 102, 241, 0.1)' },
                            }
                        }
                    })
                }
            }
        }
    </script>
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <style>
        /* åŸºç¡€æ ·å¼ä¼˜åŒ– */
        body { font-feature-settings: "ss01", "ss02", "cv01", "cv02"; -webkit-font-smoothing: antialiased; }
        
        .glass { background: rgba(255, 255, 255, 0.75); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.5); box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05); }
        .dark .glass { background: rgba(15, 23, 42, 0.7); border: 1px solid rgba(255, 255, 255, 0.08); box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2); }
        
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 12px 24px -8px rgba(99, 102, 241, 0.25); }
        
        /* æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar { width: 5px; height: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 10px; }
        .dark ::-webkit-scrollbar-thumb { background-color: #334155; }
        
        [v-cloak] { display: none; }
        
        /* Obsidian é£æ ¼ Callout æ ·å¼ */
        .callout { margin: 1.5rem 0; padding: 1rem; border-radius: 0.5rem; border-left: 4px solid; display: flex; flex-direction: column; font-size: 0.95rem; }
        .callout-title { font-weight: 700; display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }
        .callout-info { background: rgba(59, 130, 246, 0.1); border-left-color: #3b82f6; }
        .callout-info .callout-title { color: #2563eb; }
        .callout-warning { background: rgba(245, 158, 11, 0.1); border-left-color: #f59e0b; }
        .callout-warning .callout-title { color: #d97706; }
        .callout-tip { background: rgba(16, 185, 129, 0.1); border-left-color: #10b981; }
        .callout-tip .callout-title { color: #059669; }
        .callout-error { background: rgba(239, 68, 68, 0.1); border-left-color: #ef4444; }
        .callout-error .callout-title { color: #dc2626; }
        
        /* å›¾ç‰‡ä¸ä»£ç å—ä¼˜åŒ– */
        .prose img { margin: 2rem auto; border-radius: 0.75rem; box-shadow: 0 8px 20px rgba(0,0,0,0.1); cursor: zoom-in; }
        pre { background: #282c34 !important; border-radius: 0.75rem; padding-top: 3rem !important; position: relative; border: 1px solid rgba(0,0,0,0.1); }
        /* Mac çª—å£åœ†ç‚¹ */
        pre::before { content: ''; position: absolute; top: 1rem; left: 1rem; width: 0.75rem; height: 0.75rem; background: #ff5f56; border-radius: 50%; box-shadow: 1.25rem 0 0 #ffbd2e, 2.5rem 0 0 #27c93f; }
        
        /* ç›®å½•ä¼˜åŒ– */
        .toc-item { transition: all 0.2s; border-left: 3px solid transparent; padding: 6px 0 6px 16px; margin-left: 2px; position: relative; color: #64748b; }
        .dark .toc-item { color: #94a3b8; }
        .toc-item:hover { color: #6366f1; }
        .toc-active { border-left-color: #6366f1; color: #6366f1 !important; font-weight: 600; background: linear-gradient(90deg, rgba(99,102,241,0.08), transparent); }
        .toc-h3 { padding-left: 32px; font-size: 0.9em; opacity: 0.9; }
        
        /* ä»»åŠ¡åˆ—è¡¨ Checkbox æ ·å¼ */
        .prose input[type="checkbox"] { margin-right: 0.5em; accent-color: #6366f1; transform: scale(1.1); }
    </style>
</head>
<body class="bg-gray-50 text-slate-700 transition-colors duration-300 dark:bg-slate-900 dark:text-slate-300 overflow-x-hidden font-sans antialiased">

    <div id="app" class="min-h-screen relative z-0 flex flex-col" v-cloak>
        
        <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
            <div class="absolute top-0 left-0 w-[500px] h-[500px] bg-primary/20 dark:bg-primary/10 rounded-full blur-[120px] opacity-50 animate-blob"></div>
            <div class="absolute bottom-0 right-0 w-[500px] h-[500px] bg-secondary/20 dark:bg-secondary/10 rounded-full blur-[120px] opacity-50 animate-blob animation-delay-2000"></div>
        </div>

        <div v-if="showBanner" class="bg-gradient-to-r from-primary to-secondary text-white text-xs py-2 px-4 relative z-[60] shadow-sm">
            <div class="max-w-6xl mx-auto flex justify-between items-center">
                <div class="flex-1 text-center font-bold tracking-wide">
                    ğŸš€ æ–°çš„ã€ŠPythoné‡åŒ–å…¥é—¨è¯¾ã€‹æ­£åœ¨æ›´æ–°ä¸­ï¼Œå…³æ³¨ B ç«™ä¸è¿·è·¯ï¼
                </div>
                <button @click="closeBanner" class="ml-4 opacity-80 hover:opacity-100"><i class="ri-close-line text-lg"></i></button>
            </div>
        </div>

        <nav class="sticky top-0 z-50 glass shadow-sm transition-all duration-300">
            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div @click="goHome" class="flex items-center gap-2 cursor-pointer group shrink-0">
                        <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white shadow-md group-hover:rotate-6 transition duration-300">
                            <span class="text-xl">ğŸ’¸</span>
                        </div>
                        <span class="font-bold text-xl tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary hidden sm:block">Soft Wealth</span>
                        <span class="font-bold text-xl tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary sm:hidden">SW</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="flex items-center bg-white/50 dark:bg-slate-800/50 rounded-full px-3 py-1.5 border border-gray-200 dark:border-slate-700 focus-within:ring-2 ring-primary/30 transition w-32 focus-within:w-48 sm:w-auto">
                            <i class="ri-search-line text-gray-400"></i>
                            <input v-model="searchQuery" type="text" placeholder="æœç´¢..." class="bg-transparent border-none outline-none text-sm ml-2 w-full transition-all text-slate-700 dark:text-slate-200 placeholder:text-slate-400">
                        </div>
                        <button @click="toggleDark" class="w-9 h-9 rounded-full glass flex items-center justify-center text-slate-600 dark:text-yellow-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition">
                            <i :class="isDark ? 'ri-sun-line' : 'ri-moon-line'"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div v-if="currentView === 'detail'" class="h-0.5 bg-gradient-to-r from-primary to-secondary transition-all duration-100 ease-out" :style="{ width: scrollProgress + '%' }"></div>
        </nav>

        <main class="relative z-10 flex-grow">
            <transition name="fade" mode="out-in">
                
                <div v-if="currentView === 'list'" key="list" class="animate-fade-in-up">
                    <div class="relative w-full h-[400px] flex items-center justify-center bg-cover bg-center overflow-hidden" style="background-image: url('https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?q=80&w=2340&auto=format&fit=crop');">
                        <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-[2px]"></div>
                        <div class="absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-gray-50 dark:from-slate-900 to-transparent"></div>
                        <div class="relative z-10 text-center px-4 max-w-4xl mt-[-20px]">
                            <h1 class="text-4xl md:text-5xl font-bold text-white mb-6 drop-shadow-lg tracking-tight">
                                æ¢ç´¢ <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary via-purple-300 to-secondary">{{ displayedText }}</span><span class="typewriter text-white ml-1"></span>
                            </h1>
                            <p class="text-lg text-gray-200 mb-8 max-w-xl mx-auto leading-relaxed">åˆ†äº« Aè‚¡é‡åŒ–äº¤æ˜“ã€Python è„šæœ¬ä»¥åŠæ•°å­—æ¸¸æ°‘çš„å®æˆ˜å¤ç›˜ã€‚</p>
                            <button @click="scrollToContent" class="px-8 py-3 rounded-full bg-white/90 text-slate-900 font-bold hover:bg-white hover:scale-105 transition shadow-lg flex items-center gap-2 mx-auto backdrop-blur-sm">
                                å¼€å§‹é˜…è¯» <i class="ri-arrow-down-line"></i>
                            </button>
                        </div>
                    </div>

                    <div id="content-area" class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                        <div v-if="initLoading" class="grid grid-cols-1 md:grid-cols-2 gap-8 animate-pulse">
                            <div v-for="i in 4" :key="i" class="glass rounded-3xl p-6 h-80">
                                <div class="h-40 bg-slate-200 dark:bg-slate-700/50 rounded-xl mb-6"></div>
                                <div class="h-6 bg-slate-200 dark:bg-slate-700/50 rounded w-3/4 mb-4"></div>
                                <div class="h-4 bg-slate-200 dark:bg-slate-700/50 rounded w-full"></div>
                            </div>
                        </div>

                        <div v-else class="flex flex-col lg:flex-row gap-12">
                            <div class="flex-1">
                                <div class="flex flex-wrap gap-3 mb-10">
                                    <button @click="changeCategory('')" :class="['px-4 py-1.5 rounded-full text-sm font-bold transition border', !filterCategory ? 'bg-slate-800 text-white border-slate-800' : 'bg-white text-slate-600 border-gray-200 hover:border-primary hover:text-primary dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400']">å…¨éƒ¨</button>
                                    <button v-for="cat in categories" :key="cat" @click="changeCategory(cat)" :class="['px-4 py-1.5 rounded-full text-sm font-bold transition border', filterCategory === cat ? 'bg-slate-800 text-white border-slate-800' : 'bg-white text-slate-600 border-gray-200 hover:border-primary hover:text-primary dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400']">{{ cat }}</button>
                                </div>

                                <div v-if="pinnedPosts.length > 0 && !searchQuery && !filterCategory && currentPage === 1" class="mb-16">
                                    <h3 class="flex items-center gap-2 text-xl font-bold mb-6 text-slate-800 dark:text-white"><i class="ri-pushpin-2-fill text-secondary"></i> ç²¾é€‰ç½®é¡¶</h3>
                                    <div class="grid grid-cols-1 gap-8">
                                        <article v-for="post in pinnedPosts" :key="post.file" @click="loadPost(post)" class="glass rounded-3xl p-6 md:p-8 card-hover border-l-4 border-secondary/50 flex flex-col md:flex-row gap-8 items-center cursor-pointer">
                                            <div class="w-full md:w-56 h-36 rounded-xl overflow-hidden flex-shrink-0 bg-gray-200">
                                                <img :src="post.image" loading="lazy" class="w-full h-full object-cover transform hover:scale-110 transition duration-700">
                                            </div>
                                            <div class="flex-1 text-center md:text-left">
                                                <div class="flex items-center justify-center md:justify-start gap-3 mb-3 text-xs text-slate-400">
                                                    <span class="px-2 py-0.5 rounded bg-secondary/10 text-secondary font-bold">TOP</span>
                                                    <span>{{ post.date }}</span>
                                                    <span><i class="ri-time-line"></i> {{ post.readTime }} min</span>
                                                </div>
                                                <h3 class="text-2xl font-bold mb-3 text-slate-800 dark:text-slate-100 hover:text-primary transition">{{ post.title }}</h3>
                                                <p class="text-slate-500 dark:text-slate-400 line-clamp-2 leading-relaxed">{{ post.excerpt }}</p>
                                            </div>
                                        </article>
                                    </div>
                                </div>

                                <div>
                                    <h3 class="flex items-center gap-2 text-xl font-bold mb-6 text-slate-800 dark:text-white"><i class="ri-article-line text-primary"></i> æœ€æ–°å‘å¸ƒ</h3>
                                    <div v-if="paginatedPosts.length > 0">
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                                            <article v-for="post in paginatedPosts" :key="post.file" @click="loadPost(post)" class="glass rounded-3xl overflow-hidden card-hover h-full flex flex-col cursor-pointer">
                                                <div class="h-48 overflow-hidden relative bg-gray-200">
                                                    <img :src="post.image" loading="lazy" class="w-full h-full object-cover transform hover:scale-110 transition duration-700">
                                                    <div class="absolute top-4 right-4"><span class="px-3 py-1 rounded-lg text-xs font-bold bg-white/90 text-slate-800 shadow-sm backdrop-blur-sm">{{ post.category }}</span></div>
                                                </div>
                                                <div class="p-6 flex-1 flex flex-col">
                                                    <div class="flex justify-between items-center mb-3 text-xs text-slate-400">
                                                        <div>{{ post.date }}</div>
                                                        <div class="flex items-center gap-1"><i class="ri-time-line"></i> {{ post.readTime }} min</div>
                                                    </div>
                                                    <h3 class="text-lg font-bold mb-3 text-slate-800 dark:text-slate-100 hover:text-primary transition line-clamp-2">{{ post.title }}</h3>
                                                    <p class="text-sm text-slate-500 dark:text-slate-400 line-clamp-2 mb-4 flex-1 leading-relaxed">{{ post.excerpt }}</p>
                                                </div>
                                            </article>
                                        </div>
                                        <div v-if="totalPages > 1" class="flex flex-wrap justify-center items-center gap-4 py-8">
                                            <button @click="changePage(currentPage - 1)" :disabled="currentPage === 1" class="px-4 py-2 rounded-lg glass font-bold disabled:opacity-50 hover:bg-white dark:hover:bg-slate-700 transition flex items-center gap-1"><i class="ri-arrow-left-line"></i></button>
                                            <span class="font-bold text-slate-500 dark:text-slate-400 px-2">{{ currentPage }} / {{ totalPages }}</span>
                                            <button @click="changePage(currentPage + 1)" :disabled="currentPage === totalPages" class="px-4 py-2 rounded-lg glass font-bold disabled:opacity-50 hover:bg-white dark:hover:bg-slate-700 transition flex items-center gap-1"><i class="ri-arrow-right-line"></i></button>
                                        </div>
                                    </div>
                                    <div v-else class="text-center py-20 bg-white/50 dark:bg-slate-800/50 rounded-3xl"><div class="text-4xl mb-4">ğŸ›¸</div><p class="text-slate-500">æš‚æ— å†…å®¹</p></div>
                                </div>
                            </div>

                            <div class="w-full lg:w-72 flex-shrink-0">
                                <div class="sticky top-28 space-y-8">
                                    <div class="glass rounded-3xl p-6 shadow-lg">
                                        <h3 class="font-bold text-base mb-4 text-slate-800 dark:text-white flex items-center gap-2"><i class="ri-contacts-book-2-fill text-primary"></i> åˆä½œè”ç³»</h3>
                                        <div class="space-y-3">
                                            <a href="mailto:tmrmwbm@gmail.com" class="flex items-center gap-3 p-2 rounded-xl hover:bg-white/50 dark:hover:bg-slate-700/50 transition text-sm font-medium text-slate-600 dark:text-slate-300"><div class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary"><i class="ri-mail-send-line"></i></div> Email Me</a>
                                            <a href="https://x.com/tmrmwbm" target="_blank" class="flex items-center gap-3 p-2 rounded-xl hover:bg-white/50 dark:hover:bg-slate-700/50 transition text-sm font-medium text-slate-600 dark:text-slate-300"><div class="w-8 h-8 rounded-full bg-black/10 flex items-center justify-center text-slate-800 dark:text-white"><i class="ri-twitter-x-line"></i></div> Follow X</a>
                                            <a href="https://t.me/MRMWBM" target="_blank" class="flex items-center gap-3 p-2 rounded-xl hover:bg-white/50 dark:hover:bg-slate-700/50 transition text-sm font-medium text-slate-600 dark:text-slate-300"><div class="w-8 h-8 rounded-full bg-blue-400/10 flex items-center justify-center text-blue-400"><i class="ri-telegram-line"></i></div> Telegram</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-else key="detail" class="animate-fade-in-up max-w-6xl mx-auto px-4 py-12 flex flex-col lg:flex-row gap-8">
                    
                    <div class="w-full lg:w-3/4">
                        <button @click="goHome" class="mb-6 px-4 py-2 rounded-full glass text-sm font-bold text-slate-600 hover:text-primary transition flex items-center gap-2 dark:text-slate-300 hover:pl-3 group">
                            <i class="ri-arrow-left-line group-hover:-translate-x-1 transition"></i> è¿”å›é¦–é¡µ
                        </button>

                        <div v-if="errorMsg" class="text-center py-20 glass rounded-3xl">
                            <h2 class="text-xl font-bold text-slate-800 dark:text-white mb-2">æ— æ³•åŠ è½½æ–‡ç« </h2>
                            <p class="text-slate-500 mb-6">{{ errorMsg }}</p>
                            <button @click="goHome" class="px-6 py-2 bg-slate-800 text-white rounded-lg">è¿”å›</button>
                        </div>

                        <article v-else class="glass rounded-[2rem] p-8 md:p-12 shadow-2xl relative overflow-hidden">
                            <div class="text-center mb-10 border-b border-gray-100 dark:border-slate-700/50 pb-10">
                                <span class="inline-block px-3 py-1 rounded-lg bg-primary/10 text-primary text-xs font-bold mb-6 tracking-wider uppercase">{{ activePost.category }}</span>
                                <h1 class="text-3xl md:text-4xl font-bold text-slate-800 dark:text-white mb-6 leading-tight">{{ activePost.title }}</h1>
                                <div class="flex justify-center items-center gap-6 text-sm text-slate-500 dark:text-slate-400">
                                    <span class="flex items-center gap-1"><i class="ri-calendar-line"></i> {{ activePost.date }}</span>
                                    <span class="flex items-center gap-1"><i class="ri-time-line"></i> {{ activePost.readTime }} åˆ†é’Ÿé˜…è¯»</span>
                                </div>
                            </div>
                            
                            <div class="prose prose-lg max-w-none prose-slate dark:prose-invert prose-img:rounded-xl" v-html="compiledMarkdown"></div>
                            
                            <div class="mt-16 pt-8 border-t border-gray-100 dark:border-slate-700 text-center">
                                <button @click="showDonate = true" class="px-8 py-3 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold shadow-lg hover:scale-105 transition flex items-center gap-2 mx-auto"><i class="ri-cup-line"></i> èµèµæ”¯æŒ</button>
                            </div>
                        </article>
                    </div>

                    <div v-if="!errorMsg && toc.length > 0" class="hidden lg:block w-full lg:w-1/4 shrink-0">
                        <div class="sticky top-28">
                            <div class="glass rounded-2xl p-6 shadow-sm border-l-4 border-primary/20">
                                <h3 class="font-bold text-sm text-slate-400 uppercase mb-4 tracking-widest pb-2">ç›®å½•å¯¼èˆª</h3>
                                <ul class="space-y-2 text-sm text-slate-600 dark:text-slate-400 max-h-[70vh] overflow-y-auto no-scrollbar pr-2">
                                    <li v-for="item in toc" :key="item.id" 
                                        :class="['toc-item cursor-pointer truncate', item.indent === 3 ? 'toc-h3' : 'font-medium', activeHeader === item.id ? 'toc-active' : '']" 
                                        @click="scrollToHeader(item.id)">
                                        {{ item.text }}
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </transition>
        </main>
        
        <footer class="py-10 text-center text-slate-400 text-sm mt-12 relative z-10">
            <p>Â© <span id="year"></span> Soft Wealth. All rights reserved.</p>
        </footer>
        <script>document.getElementById('year').innerText = new Date().getFullYear();</script>

        <div id="lightbox" class="fixed inset-0 z-[100] bg-slate-900/95 hidden flex items-center justify-center cursor-zoom-out backdrop-blur-md p-4" onclick="this.classList.add('hidden')">
            <img id="lightbox-img" class="max-w-full max-h-full object-contain rounded-lg shadow-2xl">
        </div>

        <div v-if="showDonate" class="fixed inset-0 z-[100] bg-slate-900/60 flex items-center justify-center backdrop-blur-md p-4 animate-fade-in" @click.self="showDonate = false">
            <div class="glass bg-white dark:bg-slate-800 p-8 rounded-[2rem] shadow-2xl max-w-sm w-full text-center relative">
                <button @click="showDonate = false" class="absolute top-4 right-4 text-slate-400 hover:text-slate-600"><i class="ri-close-circle-fill text-2xl"></i></button>
                <h3 class="text-xl font-bold mb-6 text-slate-800 dark:text-white">æ„Ÿè°¢æ”¯æŒ</h3>
                <div class="w-48 h-48 bg-slate-100 mx-auto rounded-xl flex items-center justify-center mb-4 text-slate-400 text-sm">è¿™é‡Œæ”¾æ”¶æ¬¾ç </div>
            </div>
        </div>

        <button id="backToTop" class="fixed bottom-8 right-8 bg-slate-800 text-white w-10 h-10 rounded-full shadow-lg translate-y-20 opacity-0 transition-all duration-300 z-40 flex items-center justify-center hover:bg-primary" onclick="window.scrollTo({top: 0, behavior: 'smooth'})"><i class="ri-arrow-up-line"></i></button>

    </div>

    <script>
        const { createApp, ref, computed, onMounted, onUnmounted, nextTick, watch } = Vue;

        createApp({
            setup() {
                const PAGE_SIZE = 12; 
                const currentView = ref('list');
                const posts = ref([]);
                const activePost = ref({});
                const markdownContent = ref('');
                const initLoading = ref(true);
                const searchQuery = ref('');
                const filterCategory = ref('');
                const isDark = ref(false);
                const scrollProgress = ref(0);
                const currentPage = ref(1);
                const errorMsg = ref('');
                const toc = ref([]);
                const activeHeader = ref('');
                const showBanner = ref(true);
                const showDonate = ref(false);
                
                // æ‰“å­—æœº
                const typewriterTexts = ["è‡ªåŠ¨åŒ–", "é‡åŒ–äº¤æ˜“", "æ•°å­—æ¸¸æ°‘", "è¢«åŠ¨æ”¶å…¥"];
                const displayedText = ref('');
                let typeIndex = 0, charIndex = 0, isDeleting = false;
                const typeWriter = () => {
                    const currentWord = typewriterTexts[typeIndex];
                    if (isDeleting) { displayedText.value = currentWord.substring(0, charIndex - 1); charIndex--; } 
                    else { displayedText.value = currentWord.substring(0, charIndex + 1); charIndex++; }
                    let typeSpeed = isDeleting ? 50 : 150;
                    if (!isDeleting && charIndex === currentWord.length) { typeSpeed = 2000; isDeleting = true; } 
                    else if (isDeleting && charIndex === 0) { isDeleting = false; typeIndex = (typeIndex + 1) % typewriterTexts.length; typeSpeed = 500; }
                    setTimeout(typeWriter, typeSpeed);
                };

                // Markdown é¢„å¤„ç†ï¼šCallouts, Math, Checkboxes
                const processMarkdown = (text) => {
                    // 1. å¤„ç† Callouts (Obsidian é£æ ¼)
                    // > [!INFO] Title
                    text = text.replace(/^>\s?\[!(\w+)\]\s?(.*)$/gm, (match, type, title) => {
                        const typeLower = type.toLowerCase();
                        let icon = 'ri-information-line';
                        if(typeLower === 'warning') icon = 'ri-alert-line';
                        if(typeLower === 'tip') icon = 'ri-lightbulb-line';
                        if(typeLower === 'question') icon = 'ri-question-line';
                        if(typeLower === 'success') icon = 'ri-check-line';
                        if(typeLower === 'error') icon = 'ri-close-circle-line';
                        return `<div class="callout callout-${typeLower}"><div class="callout-title"><i class="${icon}"></i> ${title || type}</div><div class="callout-content">`;
                    });
                    
                    return text;
                };

                const parseFrontMatter = (text, filename) => {
                    const regex = /^---\s*\n([\s\S]*?)\n---\s*\n/;
                    const match = text.match(regex);
                    let metadata = { title: filename.replace('.md', ''), date: '2026-01-01', category: 'é»˜è®¤', image: 'https://picsum.photos/seed/default/800/500', pinned: false };
                    let body = text;
                    if (match) {
                        const yaml = match[1];
                        body = text.replace(match[0], ''); 
                        yaml.split('\n').forEach(line => {
                            const [key, ...rest] = line.split(':');
                            if (key && rest.length) {
                                let value = rest.join(':').trim();
                                if (value === 'true') value = true;
                                if (value === 'false') value = false;
                                metadata[key.trim()] = value;
                            }
                        });
                    }
                    metadata.file = 'posts/' + filename;
                    metadata.bodyRaw = body; 
                    metadata.excerpt = body.replace(/[#*`\[\]()!>]/g, '').replace(/\s+/g, ' ').substring(0, 80) + '...';
                    metadata.readTime = Math.ceil(metadata.bodyRaw.length / 400);
                    return metadata;
                };

                // é…ç½® Marked
                marked.setOptions({
                    gfm: true, // å¯ç”¨ GitHub é£æ ¼ (è¡¨æ ¼ã€ä»»åŠ¡åˆ—è¡¨)
                    breaks: true, // æ¢è¡Œç¬¦è½¬ <br>
                    highlight: function(code, lang) {
                        const language = highlight.getLanguage(lang) ? lang : 'plaintext';
                        return highlight.highlight(code, { language }).value;
                    }
                });

                onMounted(async () => {
                    if (localStorage.getItem('hideBanner')) showBanner.value = false;
                    typeWriter();
                    try {
                        const res = await fetch('posts.json');
                        if (!res.ok) throw new Error("æ— æ³•è¯»å–æ–‡ç« åˆ—è¡¨");
                        const filenames = await res.json();
                        const promises = filenames.map(async (filename) => {
                            try {
                                const mdRes = await fetch(`posts/${filename}`);
                                if (!mdRes.ok) return null;
                                return parseFrontMatter(await mdRes.text(), filename);
                            } catch (e) { return null; }
                        });
                        posts.value = (await Promise.all(promises)).filter(p => p !== null).sort((a, b) => new Date(b.date) - new Date(a.date));
                        
                        const postFile = new URLSearchParams(window.location.search).get('p');
                        if (postFile) {
                            const target = posts.value.find(p => p.file === postFile || p.file === decodeURIComponent(postFile));
                            if (target) loadPost(target); else errorMsg.value = "æ‰¾ä¸åˆ°è¯¥æ–‡ç« ";
                        }
                    } catch (e) { errorMsg.value = "åˆå§‹åŒ–å¤±è´¥"; } 
                    finally { initLoading.value = false; }

                    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) { isDark.value = true; document.documentElement.classList.add('dark'); }
                    window.addEventListener('scroll', updateProgress);
                    window.addEventListener('keydown', (e) => { if (e.key === 'Escape' && currentView.value === 'detail') goHome(); });
                });

                const closeBanner = () => { showBanner.value = false; localStorage.setItem('hideBanner', 'true'); };
                const toggleDark = () => { isDark.value = !isDark.value; document.documentElement.classList.toggle('dark', isDark.value); };
                const scrollToContent = () => document.getElementById('content-area').scrollIntoView({ behavior: 'smooth' });
                const changeCategory = (cat) => { filterCategory.value = cat; currentPage.value = 1; };
                const changePage = (p) => { if (p >= 1 && p <= totalPages.value) { currentPage.value = p; document.getElementById('regular-list-top').scrollIntoView({ behavior: 'smooth' }); }};
                
                const updateProgress = () => {
                    scrollProgress.value = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
                    const btn = document.getElementById('backToTop');
                    if (btn) btn.classList.toggle('opacity-0', window.scrollY < 300);
                    if (btn) btn.classList.toggle('translate-y-20', window.scrollY < 300);
                    
                    if (currentView.value === 'detail' && toc.value.length > 0) {
                        for (const item of toc.value) {
                            const el = document.getElementById(item.id);
                            if (el && el.getBoundingClientRect().top < 150) { activeHeader.value = item.id; }
                        }
                    }
                };

                // ç”Ÿæˆç›®å½•æ ¸å¿ƒé€»è¾‘
                const generateTOC = () => {
                    toc.value = [];
                    // ä½¿ç”¨ setTimeout ç¡®ä¿ DOM å·²ç»æ¸²æŸ“å®Œæ¯•
                    setTimeout(() => {
                        const headers = document.querySelectorAll('.prose h2, .prose h3'); // åªæŠ“å– H2 å’Œ H3
                        if (headers.length === 0) return;
                        
                        headers.forEach((header, index) => {
                            const id = 'header-' + index;
                            header.id = id; // è‡ªåŠ¨ç»™æ ‡é¢˜åŠ  ID
                            toc.value.push({
                                id: id,
                                text: header.innerText,
                                indent: parseInt(header.tagName.substring(1)) // 2 æˆ– 3
                            });
                        });
                        if (toc.value.length > 0) activeHeader.value = toc.value[0].id;
                    }, 100);
                };
                
                const scrollToHeader = (id) => {
                    const el = document.getElementById(id);
                    if (el) window.scrollTo({ top: el.getBoundingClientRect().top + window.scrollY - 80, behavior: 'smooth' });
                };

                const filteredList = computed(() => posts.value.filter(p => p.title.toLowerCase().includes(searchQuery.value.toLowerCase()) && (!filterCategory.value || p.category === filterCategory.value)));
                const pinnedPosts = computed(() => filteredList.value.filter(p => p.pinned));
                const regularPosts = computed(() => (!searchQuery.value && !filterCategory.value && currentPage.value === 1) ? filteredList.value.filter(p => !p.pinned) : filteredList.value);
                const totalPages = computed(() => Math.ceil(regularPosts.value.length / PAGE_SIZE));
                const paginatedPosts = computed(() => regularPosts.value.slice((currentPage.value - 1) * PAGE_SIZE, currentPage.value * PAGE_SIZE));
                const categories = computed(() => [...new Set(posts.value.map(p => p.category))]);
                const relatedPosts = computed(() => posts.value.filter(p => p.category === activePost.value.category && p.file !== activePost.value.file).slice(0, 2));

                // æ ¸å¿ƒæ¸²æŸ“é€»è¾‘
                const compiledMarkdown = computed(() => {
                    let html = marked.parse(processMarkdown(markdownContent.value));
                    // Checkbox æ›¿æ¢
                    html = html.replace(/<li><input disabled="" type="checkbox">/g, '<li class="task-list-item"><input type="checkbox" disabled>');
                    html = html.replace(/<li><input checked="" disabled="" type="checkbox">/g, '<li class="task-list-item"><input type="checkbox" checked disabled>');
                    return html;
                });

                const loadPost = (post) => {
                    savedScrollPosition.value = window.scrollY;
                    activePost.value = post;
                    markdownContent.value = post.bodyRaw;
                    currentView.value = 'detail';
                    errorMsg.value = ''; 
                    window.scrollTo(0, 0);
                    document.title = `${post.title} - Soft Wealth`;
                    window.history.pushState({ path: `?p=${encodeURIComponent(post.file)}` }, '', `?p=${encodeURIComponent(post.file)}`);

                    nextTick(() => {
                        generateTOC(); 
                        renderMathInElement(document.querySelector('.prose'), { delimiters: [{left: "$$", right: "$$", display: true}, {left: "$", right: "$", display: false}] });
                        
                        document.querySelectorAll('pre code').forEach((el) => {
                            const pre = el.parentElement;
                            if (!pre.querySelector('.copy-btn')) {
                                const btn = document.createElement('button');
                                btn.className = 'copy-btn';
                                btn.innerText = 'Copy';
                                btn.onclick = () => { navigator.clipboard.writeText(el.innerText).then(() => { btn.innerText = 'Copied!'; setTimeout(() => btn.innerText = 'Copy', 2000); }); };
                                pre.appendChild(btn);
                            }
                        });
                        
                        document.querySelectorAll('.prose img').forEach(img => {
                            img.onclick = (e) => {
                                e.stopPropagation();
                                document.getElementById('lightbox').classList.remove('hidden');
                                document.getElementById('lightbox-img').src = img.src;
                            };
                        });
                    });
                };

                const goHome = async () => { 
                    currentView.value = 'list'; 
                    searchQuery.value = ''; 
                    activePost.value = {}; 
                    document.title = 'Soft Wealth | èˆ’é€‚çš„æé’±å“²å­¦'; 
                    window.history.pushState({ path: '/' }, '', '/');
                    await nextTick();
                    window.scrollTo(0, savedScrollPosition.value);
                };

                return { currentView, pinnedPosts, regularPosts, paginatedPosts, activePost, compiledMarkdown, initLoading, searchQuery, filterCategory, categories, goHome, isDark, toggleDark, scrollProgress, scrollToContent, currentPage, totalPages, changePage, changeCategory, errorMsg, toc, scrollToHeader, activeHeader, relatedPosts, showBanner, closeBanner, showDonate, displayedText, loadPost };
            }
        }).mount('#app');
    </script>
</body>
</html>
