<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üí∏</text></svg>">
    
    <meta name="description" content="Soft Wealth ÊòØ‰∏Ä‰∏™‰∏ìÊ≥®‰∫é AËÇ°ÈáèÂåñ‰∫§Êòì„ÄÅPython Ëá™Âä®ÂåñËÑöÊú¨ÂºÄÂèë‰ª•ÂèäÊï∞Â≠óÊ∏∏Ê∞ëÁîüÊ¥ªÊñπÂºèÂàÜ‰∫´ÁöÑ‰∏™‰∫∫ÂçöÂÆ¢„ÄÇ">
    <meta property="og:title" content="Soft Wealth | ËàíÈÄÇÁöÑÊêûÈí±Âì≤Â≠¶">
    <meta property="og:type" content="website">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soft Wealth | ËàíÈÄÇÁöÑÊêûÈí±Âì≤Â≠¶</title>
    
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        // üçé macOS ‰ºòÂÖàÂ≠ó‰ΩìÊ†à
                        sans: ['-apple-system', 'BlinkMacSystemFont', '"SF Pro Text"', '"Helvetica Neue"', 'Helvetica', '"PingFang SC"', '"Hiragino Sans GB"', '"Microsoft YaHei"', 'Arial', 'sans-serif'],
                        serif: ['"New York"', 'Georgia', '"Songti SC"', 'serif'],
                        mono: ['"SF Mono"', 'Menlo', 'Monaco', 'Consolas', '"Liberation Mono"', '"Courier New"', 'monospace']
                    },
                    colors: { primary: '#007AFF', secondary: '#FF2D55', dark: '#1c1c1e', light: '#f2f2f7' }, // ‰ΩøÁî® iOS Á≥ªÁªüËâ≤
                    animation: { 'fade-in-up': 'fadeInUp 0.5s ease-out', 'blob': 'blob 10s infinite' },
                    keyframes: { 
                        fadeInUp: { '0%': { opacity: '0', transform: 'translateY(15px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        blob: { '0%': { transform: 'translate(0px, 0px) scale(1)' }, '33%': { transform: 'translate(30px, -50px) scale(1.1)' }, '66%': { transform: 'translate(-20px, 20px) scale(0.9)' }, '100%': { transform: 'translate(0px, 0px) scale(1)' } }
                    },
                    typography: (theme) => ({
                        DEFAULT: {
                            css: {
                                color: '#333',
                                fontFamily: '-apple-system, BlinkMacSystemFont, sans-serif',
                                lineHeight: '1.7',
                                maxWidth: 'none', // ÂèñÊ∂àÊúÄÂ§ßÂÆΩÂ∫¶ÈôêÂà∂ÔºåÁî±ÂÆπÂô®ÊéßÂà∂
                                'h1, h2, h3, h4': { color: '#111', fontWeight: '700', letterSpacing: '-0.02em', marginTop: '1.2em', marginBottom: '0.6em' },
                                'h1': { fontSize: '2em' },
                                'h2': { fontSize: '1.5em', borderBottom: '1px solid #eaeaea', paddingBottom: '0.3em' }, // H2 Â∏¶‰∏ãÂàíÁ∫ø
                                'h3': { fontSize: '1.25em' },
                                blockquote: { 
                                    borderLeftColor: '#007AFF', 
                                    backgroundColor: '#F5F5F7', 
                                    color: '#666',
                                    fontStyle: 'normal', 
                                    padding: '1rem',
                                    borderRadius: '8px',
                                    quotes: 'none'
                                },
                                code: { color: '#FF2D55', backgroundColor: 'rgba(255, 45, 85, 0.05)', padding: '0.2em 0.4em', borderRadius: '4px', fontWeight: '500', fontFamily: 'Menlo, monospace' },
                                'code::before': { content: '""' },
                                'code::after': { content: '""' },
                                table: { width: '100%', borderCollapse: 'separate', borderSpacing: '0', borderRadius: '8px', border: '1px solid #e5e7eb', overflow: 'hidden' },
                                'thead th': { backgroundColor: '#f9fafb', padding: '12px', color: '#374151', borderBottom: '1px solid #e5e7eb', textAlign: 'left' },
                                'tbody td': { padding: '12px', borderBottom: '1px solid #e5e7eb' },
                                'tbody tr:last-child td': { borderBottom: 'none' },
                                'tbody tr:nth-child(even)': { backgroundColor: '#f9fafb' },
                            }
                        },
                        dark: {
                            css: {
                                color: '#d1d5db',
                                'h1, h2, h3, h4': { color: '#fff' },
                                'h2': { borderBottomColor: '#333' },
                                blockquote: { backgroundColor: '#2c2c2e', color: '#a1a1aa' },
                                'thead th': { backgroundColor: '#1f2937', color: '#e5e7eb', borderBottomColor: '#374151' },
                                'tbody td': { borderBottomColor: '#374151' },
                                'tbody tr:nth-child(even)': { backgroundColor: '#1f2937' },
                                table: { borderColor: '#374151' }
                            }
                        }
                    })
                }
            }
        }
    </script>
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <style>
        body { font-feature-settings: "ss01", "ss02"; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        
        .glass { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.6); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.03); }
        .dark .glass { background: rgba(28, 28, 30, 0.75); border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3); }
        
        .card-hover { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 12px 24px -8px rgba(0, 0, 0, 0.1); }
        
        ::-webkit-scrollbar { width: 0px; background: transparent; } /* ÈöêËóèÂéüÁîüÊªöÂä®Êù°ÔºåÊõ¥ÂÉè App */
        
        [v-cloak] { display: none; }
        
        /* Obsidian Callouts */
        .callout { margin: 1.5rem 0; padding: 1rem 1.2rem; border-radius: 8px; border-left: 4px solid; background: rgba(128, 128, 128, 0.05); }
        .callout-title { font-weight: 600; display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }
        .callout-info { border-left-color: #007AFF; background: rgba(0, 122, 255, 0.08); } .callout-info .callout-title { color: #007AFF; }
        .callout-warning { border-left-color: #FF9500; background: rgba(255, 149, 0, 0.08); } .callout-warning .callout-title { color: #FF9500; }
        .callout-tip { border-left-color: #34C759; background: rgba(52, 199, 89, 0.08); } .callout-tip .callout-title { color: #34C759; }
        .callout-error { border-left-color: #FF3B30; background: rgba(255, 59, 48, 0.08); } .callout-error .callout-title { color: #FF3B30; }
        
        .prose img { margin: 2rem auto; border-radius: 12px; box-shadow: 0 8px 30px rgba(0,0,0,0.08); cursor: zoom-in; }
        
        /* Mac Terminal Style */
        pre { background: #1e1e1e !important; border-radius: 10px; padding-top: 2.8rem !important; position: relative; border: 1px solid rgba(0,0,0,0.1); box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
        pre::before { content: ''; position: absolute; top: 18px; left: 16px; width: 10px; height: 10px; background: #FF5F56; border-radius: 50%; box-shadow: 18px 0 0 #FFBD2E, 36px 0 0 #27C93F; }
        
        /* ÁõÆÂΩïÊ†∑Âºè‰ºòÂåñ */
        .toc-item { transition: all 0.2s; border-left: 2px solid transparent; padding: 4px 0 4px 12px; margin-left: 0; position: relative; color: #86868b; font-size: 0.9rem; line-height: 1.4; }
        .dark .toc-item { color: #98989d; }
        .toc-item:hover { color: #007AFF; }
        .toc-active { border-left-color: #007AFF; color: #007AFF !important; font-weight: 600; }
        
        /* Â±ÇÁ∫ßÁº©Ëøõ */
        .indent-1 { padding-left: 12px; } /* H1 */
        .indent-2 { padding-left: 24px; } /* H2 */
        .indent-3 { padding-left: 36px; font-size: 0.85rem; } /* H3 */
        
        /* ‰ªªÂä°ÂàóË°® */
        .prose input[type="checkbox"] { margin-right: 0.5em; accent-color: #007AFF; transform: scale(1.1); }
    </style>
</head>
<body class="bg-[#F5F5F7] text-[#1d1d1f] transition-colors duration-300 dark:bg-[#000000] dark:text-[#f5f5f7] overflow-x-hidden font-sans antialiased">

    <div id="app" class="min-h-screen relative z-0 flex flex-col" v-cloak>
        
        <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
            <div class="absolute top-[-10%] left-[-10%] w-[600px] h-[600px] bg-blue-400/20 dark:bg-blue-600/10 rounded-full blur-[100px] opacity-40 animate-blob"></div>
            <div class="absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-purple-400/20 dark:bg-purple-600/10 rounded-full blur-[100px] opacity-40 animate-blob animation-delay-2000"></div>
        </div>

        <div v-if="showBanner" class="bg-[#1d1d1f] dark:bg-[#1c1c1e] text-white text-xs py-2.5 px-4 relative z-[60]">
            <div class="max-w-6xl mx-auto flex justify-between items-center">
                <div class="flex-1 text-center font-medium tracking-wide">
                    üöÄ Êñ∞ÁöÑ„ÄäPythonÈáèÂåñÂÖ•Èó®ËØæ„ÄãÊ≠£Âú®Êõ¥Êñ∞‰∏≠ÔºåÂÖ≥Ê≥® B Á´ô‰∏çËø∑Ë∑ØÔºÅ
                </div>
                <button @click="closeBanner" class="ml-4 opacity-70 hover:opacity-100"><i class="ri-close-line text-lg"></i></button>
            </div>
        </div>

        <nav class="sticky top-0 z-50 glass shadow-[0_1px_0_0_rgba(0,0,0,0.05)] dark:shadow-[0_1px_0_0_rgba(255,255,255,0.1)] transition-all duration-300 backdrop-blur-xl">
            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-14 items-center">
                    <div @click="goHome" class="flex items-center gap-2 cursor-pointer group shrink-0">
                        <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white shadow-sm group-hover:scale-105 transition duration-300">
                            <span class="text-lg">üí∏</span>
                        </div>
                        <span class="font-bold text-lg tracking-tight hidden sm:block">Soft Wealth</span>
                        <span class="font-bold text-lg tracking-tight sm:hidden">SW</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="flex items-center bg-gray-100/50 dark:bg-[#1c1c1e] rounded-lg px-3 py-1.5 transition w-32 focus-within:w-48 sm:w-auto hover:bg-gray-100 dark:hover:bg-[#2c2c2e]">
                            <i class="ri-search-line text-gray-400 text-sm"></i>
                            <input v-model="searchQuery" type="text" placeholder="ÊêúÁ¥¢..." class="bg-transparent border-none outline-none text-sm ml-2 w-full text-slate-700 dark:text-slate-200 placeholder:text-slate-400">
                        </div>
                        <button @click="toggleDark" class="w-8 h-8 rounded-full hover:bg-gray-200 dark:hover:bg-[#2c2c2e] flex items-center justify-center transition">
                            <i :class="isDark ? 'ri-sun-line' : 'ri-moon-line'" class="text-gray-500 dark:text-gray-400"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div v-if="currentView === 'detail'" class="h-[2px] bg-blue-500 transition-all duration-100 ease-out" :style="{ width: scrollProgress + '%' }"></div>
        </nav>

        <main class="relative z-10 flex-grow">
            <transition name="fade" mode="out-in">
                
                <div v-if="currentView === 'list'" key="list" class="animate-fade-in-up">
                    <div class="relative w-full h-[360px] flex items-center justify-center bg-cover bg-center overflow-hidden" style="background-image: url('https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2264&auto=format&fit=crop');">
                        <div class="absolute inset-0 bg-black/40 backdrop-blur-[2px]"></div>
                        <div class="relative z-10 text-center px-4 max-w-4xl mt-[-10px]">
                            <h1 class="text-4xl md:text-6xl font-bold text-white mb-6 tracking-tight drop-shadow-md">
                                Êé¢Á¥¢ <span class="text-blue-400">{{ displayedText }}</span><span class="typewriter text-white ml-1"></span>
                            </h1>
                            <p class="text-lg text-gray-200 mb-8 max-w-xl mx-auto font-medium opacity-90">ÂàÜ‰∫´ AËÇ°ÈáèÂåñ‰∫§Êòì„ÄÅPython ËÑöÊú¨‰ª•ÂèäÊï∞Â≠óÊ∏∏Ê∞ëÁöÑÂÆûÊàòÂ§çÁõò„ÄÇ</p>
                            <button @click="scrollToContent" class="px-6 py-2.5 rounded-full bg-white text-black font-semibold hover:bg-gray-100 transition shadow-lg flex items-center gap-2 mx-auto">
                                ÂºÄÂßãÈòÖËØª <i class="ri-arrow-down-line"></i>
                            </button>
                        </div>
                    </div>

                    <div id="content-area" class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                        <div v-if="initLoading" class="grid grid-cols-1 md:grid-cols-2 gap-6 animate-pulse">
                            <div v-for="i in 4" :key="i" class="glass rounded-2xl p-6 h-64"></div>
                        </div>

                        <div v-else class="flex flex-col lg:flex-row gap-10">
                            <div class="flex-1">
                                <div class="flex flex-wrap gap-2 mb-8">
                                    <button @click="changeCategory('')" :class="['px-4 py-1.5 rounded-full text-sm font-medium transition', !filterCategory ? 'bg-black text-white dark:bg-white dark:text-black' : 'bg-white text-gray-600 hover:bg-gray-100 dark:bg-[#1c1c1e] dark:text-gray-300 dark:hover:bg-[#2c2c2e]']">ÂÖ®ÈÉ®</button>
                                    <button v-for="cat in categories" :key="cat" @click="changeCategory(cat)" :class="['px-4 py-1.5 rounded-full text-sm font-medium transition', filterCategory === cat ? 'bg-black text-white dark:bg-white dark:text-black' : 'bg-white text-gray-600 hover:bg-gray-100 dark:bg-[#1c1c1e] dark:text-gray-300 dark:hover:bg-[#2c2c2e]']">{{ cat }}</button>
                                </div>

                                <div v-if="pinnedPosts.length > 0 && !searchQuery && !filterCategory && currentPage === 1" class="mb-12">
                                    <h3 class="flex items-center gap-2 text-lg font-bold mb-4 text-[#1d1d1f] dark:text-white"><i class="ri-pushpin-2-fill text-blue-500"></i> ÁΩÆÈ°∂Á≤æÈÄâ</h3>
                                    <div class="grid grid-cols-1 gap-6">
                                        <article v-for="post in pinnedPosts" :key="post.file" @click="loadPost(post)" class="glass rounded-2xl p-6 flex flex-col md:flex-row gap-6 items-center cursor-pointer card-hover">
                                            <div class="w-full md:w-48 h-32 rounded-lg overflow-hidden flex-shrink-0 bg-gray-200">
                                                <img :src="post.image" loading="lazy" class="w-full h-full object-cover transform hover:scale-105 transition duration-500">
                                            </div>
                                            <div class="flex-1 text-center md:text-left">
                                                <div class="flex items-center justify-center md:justify-start gap-2 mb-2 text-xs text-gray-500">
                                                    <span class="px-2 py-0.5 rounded bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300 font-bold">TOP</span>
                                                    <span>{{ post.date }}</span>
                                                </div>
                                                <h3 class="text-xl font-bold mb-2 text-[#1d1d1f] dark:text-white hover:text-blue-500 transition">{{ post.title }}</h3>
                                                <p class="text-sm text-gray-500 dark:text-gray-400 line-clamp-2">{{ post.excerpt }}</p>
                                            </div>
                                        </article>
                                    </div>
                                </div>

                                <div>
                                    <h3 class="flex items-center gap-2 text-lg font-bold mb-4 text-[#1d1d1f] dark:text-white"><i class="ri-article-line text-blue-500"></i> ÊúÄÊñ∞ÂèëÂ∏É</h3>
                                    <div v-if="paginatedPosts.length > 0">
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                            <article v-for="post in paginatedPosts" :key="post.file" @click="loadPost(post)" class="glass rounded-2xl overflow-hidden cursor-pointer card-hover flex flex-col h-full">
                                                <div class="h-40 overflow-hidden relative bg-gray-200">
                                                    <img :src="post.image" loading="lazy" class="w-full h-full object-cover transform hover:scale-105 transition duration-500">
                                                    <div class="absolute top-3 right-3"><span class="px-2 py-1 rounded bg-white/90 dark:bg-black/80 text-xs font-bold shadow-sm backdrop-blur-md">{{ post.category }}</span></div>
                                                </div>
                                                <div class="p-5 flex-1 flex flex-col">
                                                    <div class="flex justify-between items-center mb-2 text-xs text-gray-400">
                                                        <span>{{ post.date }}</span>
                                                        <span>{{ post.readTime }} min</span>
                                                    </div>
                                                    <h3 class="text-base font-bold mb-2 text-[#1d1d1f] dark:text-white hover:text-blue-500 transition line-clamp-2">{{ post.title }}</h3>
                                                    <p class="text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mb-4 flex-1">{{ post.excerpt }}</p>
                                                </div>
                                            </article>
                                        </div>
                                        <div v-if="totalPages > 1" class="flex justify-center items-center gap-4 py-4">
                                            <button @click="changePage(currentPage - 1)" :disabled="currentPage === 1" class="w-10 h-10 rounded-full glass flex items-center justify-center disabled:opacity-30 hover:bg-gray-100 dark:hover:bg-[#2c2c2e] transition"><i class="ri-arrow-left-line"></i></button>
                                            <span class="text-sm font-medium">{{ currentPage }} / {{ totalPages }}</span>
                                            <button @click="changePage(currentPage + 1)" :disabled="currentPage === totalPages" class="w-10 h-10 rounded-full glass flex items-center justify-center disabled:opacity-30 hover:bg-gray-100 dark:hover:bg-[#2c2c2e] transition"><i class="ri-arrow-right-line"></i></button>
                                        </div>
                                    </div>
                                    <div v-else class="text-center py-20 opacity-50"><p>ÊöÇÊó†ÂÜÖÂÆπ</p></div>
                                </div>
                            </div>

                            <div class="w-full lg:w-72 flex-shrink-0">
                                <div class="sticky top-20 space-y-6">
                                    <div class="glass rounded-2xl p-6">
                                        <h3 class="font-bold text-sm mb-4 text-[#1d1d1f] dark:text-white uppercase tracking-wider">Connect</h3>
                                        <div class="space-y-3">
                                            <a href="mailto:tmrmwbm@gmail.com" class="flex items-center gap-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#2c2c2e] transition text-sm text-gray-600 dark:text-gray-300">
                                                <div class="w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400"><i class="ri-mail-send-line"></i></div> Email Me
                                            </a>
                                            <a href="https://x.com/tmrmwbm" target="_blank" class="flex items-center gap-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#2c2c2e] transition text-sm text-gray-600 dark:text-gray-300">
                                                <div class="w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-black dark:text-white"><i class="ri-twitter-x-line"></i></div> Follow X
                                            </a>
                                            <a href="https://t.me/MRMWBM" target="_blank" class="flex items-center gap-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#2c2c2e] transition text-sm text-gray-600 dark:text-gray-300">
                                                <div class="w-8 h-8 rounded-full bg-sky-100 dark:bg-sky-900/30 flex items-center justify-center text-sky-600 dark:text-sky-400"><i class="ri-telegram-line"></i></div> Telegram
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-else key="detail" class="animate-fade-in-up max-w-6xl mx-auto px-4 py-8 flex flex-col lg:flex-row gap-10">
                    
                    <div class="w-full lg:w-3/4 min-w-0">
                        <button @click="goHome" class="mb-4 inline-flex items-center gap-1 text-sm font-medium text-gray-500 hover:text-black dark:hover:text-white transition">
                            <i class="ri-arrow-left-line"></i> ËøîÂõûÈ¶ñÈ°µ
                        </button>

                        <div v-if="errorMsg" class="text-center py-20 glass rounded-2xl">
                            <h2 class="text-xl font-bold mb-2">Êó†Ê≥ïÂä†ËΩΩÊñáÁ´†</h2>
                            <p class="text-gray-500 mb-4">{{ errorMsg }}</p>
                            <button @click="goHome" class="px-4 py-2 bg-black text-white rounded-lg text-sm">ËøîÂõû</button>
                        </div>

                        <article v-else class="glass rounded-3xl p-8 md:p-12 shadow-sm">
                            <header class="mb-10 pb-8 border-b border-gray-100 dark:border-gray-800">
                                <span class="inline-block px-3 py-1 rounded-full bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-xs font-bold mb-4 tracking-wider uppercase">{{ activePost.category }}</span>
                                <h1 class="text-3xl md:text-4xl font-extrabold text-[#1d1d1f] dark:text-white mb-6 leading-tight">{{ activePost.title }}</h1>
                                <div class="flex items-center gap-6 text-sm text-gray-500 dark:text-gray-400 font-medium">
                                    <span class="flex items-center gap-1.5"><i class="ri-calendar-line"></i> {{ activePost.date }}</span>
                                    <span class="flex items-center gap-1.5"><i class="ri-time-line"></i> {{ activePost.readTime }} ÂàÜÈíü</span>
                                </div>
                            </header>
                            
                            <div class="prose prose-lg max-w-none prose-slate dark:prose-invert" v-html="compiledMarkdown"></div>
                            
                            <div class="mt-16 pt-8 border-t border-gray-100 dark:border-gray-800 text-center">
                                <button @click="showDonate = true" class="px-8 py-3 rounded-full bg-gradient-to-r from-orange-400 to-red-500 text-white font-bold shadow-lg hover:scale-105 transition flex items-center gap-2 mx-auto text-sm">
                                    <i class="ri-cup-line text-lg"></i> ËµûËµèÊîØÊåÅ
                                </button>
                            </div>
                        </article>
                    </div>

                    <div v-if="!errorMsg && toc.length > 0" class="hidden lg:block w-full lg:w-1/4 shrink-0">
                        <div class="sticky top-24">
                            <div class="glass rounded-2xl p-5 shadow-sm transition-all duration-300" :class="{'opacity-50 hover:opacity-100': !isTocOpen}">
                                <div class="flex justify-between items-center mb-4 pb-2 border-b border-gray-100 dark:border-gray-800 cursor-pointer" @click="isTocOpen = !isTocOpen">
                                    <h3 class="font-bold text-xs text-gray-400 uppercase tracking-widest">ÁõÆÂΩïÂØºËà™</h3>
                                    <i :class="isTocOpen ? 'ri-arrow-up-s-line' : 'ri-arrow-down-s-line'" class="text-gray-400"></i>
                                </div>
                                <ul v-show="isTocOpen" class="space-y-1 text-sm max-h-[70vh] overflow-y-auto no-scrollbar">
                                    <li v-for="item in toc" :key="item.id" 
                                        :class="['toc-item cursor-pointer truncate rounded-md py-1.5', `indent-${item.indent}`, activeHeader === item.id ? 'toc-active' : '']" 
                                        @click="scrollToHeader(item.id)">
                                        {{ item.text }}
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </transition>
        </main>
        
        <footer class="py-10 text-center text-gray-400 text-xs mt-12 relative z-10">
            <p>¬© <span id="year"></span> Soft Wealth. All rights reserved.</p>
        </footer>
        <script>document.getElementById('year').innerText = new Date().getFullYear();</script>

        <div id="lightbox" class="fixed inset-0 z-[100] bg-black/90 hidden flex items-center justify-center cursor-zoom-out backdrop-blur-md p-4" onclick="this.classList.add('hidden')">
            <img id="lightbox-img" class="max-w-full max-h-full object-contain rounded-lg shadow-2xl">
        </div>

        <div v-if="showDonate" class="fixed inset-0 z-[100] bg-black/50 flex items-center justify-center backdrop-blur-sm p-4 animate-fade-in" @click.self="showDonate = false">
            <div class="glass bg-white dark:bg-[#1c1c1e] p-8 rounded-3xl shadow-2xl max-w-sm w-full text-center relative">
                <button @click="showDonate = false" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><i class="ri-close-circle-fill text-2xl"></i></button>
                <div class="w-12 h-12 bg-orange-100 text-orange-500 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl">‚òïÔ∏è</div>
                <h3 class="text-lg font-bold mb-2 text-[#1d1d1f] dark:text-white">ÊÑüË∞¢ÊîØÊåÅ</h3>
                <p class="text-gray-500 text-xs mb-6">ÊÇ®ÁöÑÊîØÊåÅÊòØÊàëÊåÅÁª≠Êõ¥Êñ∞ÁöÑÂä®Âäõ</p>
                <div class="w-48 h-48 bg-gray-100 mx-auto rounded-xl flex items-center justify-center mb-4 text-gray-400 text-xs border border-dashed border-gray-300">ËøôÈáåÊîæÊî∂Ê¨æÁ†Å</div>
            </div>
        </div>

        <button id="backToTop" class="fixed bottom-8 right-8 bg-[#1d1d1f] dark:bg-white text-white dark:text-black w-10 h-10 rounded-full shadow-lg translate-y-20 opacity-0 transition-all duration-300 z-40 flex items-center justify-center hover:scale-110" onclick="window.scrollTo({top: 0, behavior: 'smooth'})"><i class="ri-arrow-up-line"></i></button>

    </div>

    <script>
        const { createApp, ref, computed, onMounted, onUnmounted, nextTick, watch } = Vue;

        createApp({
            setup() {
                const PAGE_SIZE = 12; 
                const currentView = ref('list');
                const posts = ref([]);
                const activePost = ref({});
                const markdownContent = ref('');
                const initLoading = ref(true);
                const searchQuery = ref('');
                const filterCategory = ref('');
                const isDark = ref(false);
                const scrollProgress = ref(0);
                const currentPage = ref(1);
                const errorMsg = ref('');
                const toc = ref([]);
                const activeHeader = ref('');
                const showBanner = ref(true);
                const showDonate = ref(false);
                const isTocOpen = ref(true); // ÁõÆÂΩïÊäòÂè†Áä∂ÊÄÅ
                
                const typewriterTexts = ["Ëá™Âä®Âåñ", "ÈáèÂåñ‰∫§Êòì", "Êï∞Â≠óÊ∏∏Ê∞ë", "Ë¢´Âä®Êî∂ÂÖ•"];
                const displayedText = ref('');
                let typeIndex = 0, charIndex = 0, isDeleting = false;
                const typeWriter = () => {
                    const currentWord = typewriterTexts[typeIndex];
                    if (isDeleting) { displayedText.value = currentWord.substring(0, charIndex - 1); charIndex--; } 
                    else { displayedText.value = currentWord.substring(0, charIndex + 1); charIndex++; }
                    let typeSpeed = isDeleting ? 50 : 150;
                    if (!isDeleting && charIndex === currentWord.length) { typeSpeed = 2000; isDeleting = true; } 
                    else if (isDeleting && charIndex === 0) { isDeleting = false; typeIndex = (typeIndex + 1) % typewriterTexts.length; typeSpeed = 500; }
                    setTimeout(typeWriter, typeSpeed);
                };

                const processMarkdown = (text) => {
                    // Obsidian Callouts
                    text = text.replace(/^>\s?\[!(\w+)\]\s?(.*)$/gm, (match, type, title) => {
                        const typeLower = type.toLowerCase();
                        let icon = 'ri-information-line';
                        if(typeLower === 'warning') icon = 'ri-alert-line';
                        if(typeLower === 'tip') icon = 'ri-lightbulb-line';
                        if(typeLower === 'question') icon = 'ri-question-line';
                        if(typeLower === 'success') icon = 'ri-check-line';
                        if(typeLower === 'error') icon = 'ri-close-circle-line';
                        return `<div class="callout callout-${typeLower}"><div class="callout-title"><i class="${icon}"></i> ${title || type}</div><div class="callout-content">`;
                    });
                    return text;
                };

                const parseFrontMatter = (text, filename) => {
                    const regex = /^---\s*\n([\s\S]*?)\n---\s*\n/;
                    const match = text.match(regex);
                    let metadata = { title: filename.replace('.md', ''), date: '2026-01-01', category: 'ÈªòËÆ§', image: 'https://picsum.photos/seed/default/800/500', pinned: false };
                    let body = text;
                    if (match) {
                        const yaml = match[1];
                        body = text.replace(match[0], ''); 
                        yaml.split('\n').forEach(line => {
                            const [key, ...rest] = line.split(':');
                            if (key && rest.length) {
                                let value = rest.join(':').trim();
                                if (value === 'true') value = true;
                                if (value === 'false') value = false;
                                metadata[key.trim()] = value;
                            }
                        });
                    }
                    metadata.file = 'posts/' + filename;
                    metadata.bodyRaw = body; 
                    metadata.excerpt = body.replace(/[#*`\[\]()!>]/g, '').replace(/\s+/g, ' ').substring(0, 80) + '...';
                    metadata.readTime = Math.ceil(metadata.bodyRaw.length / 400);
                    return metadata;
                };

                marked.setOptions({
                    gfm: true,
                    breaks: true,
                    highlight: function(code, lang) {
                        const language = highlight.getLanguage(lang) ? lang : 'plaintext';
                        return highlight.highlight(code, { language }).value;
                    }
                });

                onMounted(async () => {
                    if (localStorage.getItem('hideBanner')) showBanner.value = false;
                    typeWriter();
                    try {
                        const res = await fetch('posts.json');
                        if (!res.ok) throw new Error("Êó†Ê≥ïËØªÂèñÊñáÁ´†ÂàóË°®");
                        const filenames = await res.json();
                        const promises = filenames.map(async (filename) => {
                            try {
                                const mdRes = await fetch(`posts/${filename}`);
                                if (!mdRes.ok) return null;
                                return parseFrontMatter(await mdRes.text(), filename);
                            } catch (e) { return null; }
                        });
                        posts.value = (await Promise.all(promises)).filter(p => p !== null).sort((a, b) => new Date(b.date) - new Date(a.date));
                        
                        const postFile = new URLSearchParams(window.location.search).get('p');
                        if (postFile) {
                            const target = posts.value.find(p => p.file === postFile || p.file === decodeURIComponent(postFile));
                            if (target) loadPost(target); else errorMsg.value = "Êâæ‰∏çÂà∞ËØ•ÊñáÁ´†";
                        }
                    } catch (e) { errorMsg.value = "ÂàùÂßãÂåñÂ§±Ë¥•"; } 
                    finally { initLoading.value = false; }

                    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) { isDark.value = true; document.documentElement.classList.add('dark'); }
                    window.addEventListener('scroll', updateProgress);
                    window.addEventListener('keydown', (e) => { if (e.key === 'Escape' && currentView.value === 'detail') goHome(); });
                });

                const closeBanner = () => { showBanner.value = false; localStorage.setItem('hideBanner', 'true'); };
                const toggleDark = () => { isDark.value = !isDark.value; document.documentElement.classList.toggle('dark', isDark.value); };
                const scrollToContent = () => document.getElementById('content-area').scrollIntoView({ behavior: 'smooth' });
                const changeCategory = (cat) => { filterCategory.value = cat; currentPage.value = 1; };
                const changePage = (p) => { if (p >= 1 && p <= totalPages.value) { currentPage.value = p; document.getElementById('regular-list-top').scrollIntoView({ behavior: 'smooth' }); }};
                
                const updateProgress = () => {
                    scrollProgress.value = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
                    const btn = document.getElementById('backToTop');
                    if (btn) {
                        btn.classList.toggle('opacity-0', window.scrollY < 300);
                        btn.classList.toggle('translate-y-20', window.scrollY < 300);
                    }
                    if (currentView.value === 'detail' && toc.value.length > 0) {
                        for (const item of toc.value) {
                            const el = document.getElementById(item.id);
                            if (el && el.getBoundingClientRect().top < 150) { activeHeader.value = item.id; }
                        }
                    }
                };

                // Ê†∏ÂøÉÁõÆÂΩïÁîüÊàêÈÄªËæë‰øÆÂ§ç
                const generateTOC = () => {
                    toc.value = [];
                    // ‰ΩøÁî® setTimeout Á°Æ‰øù DOM Â∑≤ÁªèÊ∏≤ÊüìÂÆåÊØï
                    setTimeout(() => {
                        // ÊäìÂèñÊâÄÊúâ H1, H2, H3
                        const headers = document.querySelectorAll('.prose h1, .prose h2, .prose h3'); 
                        if (headers.length === 0) return;
                        
                        headers.forEach((header, index) => {
                            const id = 'header-' + index;
                            header.id = id; 
                            toc.value.push({
                                id: id,
                                text: header.innerText,
                                // H1->1, H2->2, H3->3
                                indent: parseInt(header.tagName.substring(1)) 
                            });
                        });
                        if (toc.value.length > 0) activeHeader.value = toc.value[0].id;
                    }, 200); // Â¢ûÂä†‰∏ÄÁÇπÂª∂ËøüÔºåÁ°Æ‰øùÊ∏≤ÊüìÂÆåÊàê
                };
                
                const scrollToHeader = (id) => {
                    const el = document.getElementById(id);
                    if (el) window.scrollTo({ top: el.getBoundingClientRect().top + window.scrollY - 80, behavior: 'smooth' });
                };

                const filteredList = computed(() => posts.value.filter(p => p.title.toLowerCase().includes(searchQuery.value.toLowerCase()) && (!filterCategory.value || p.category === filterCategory.value)));
                const pinnedPosts = computed(() => filteredList.value.filter(p => p.pinned));
                const regularPosts = computed(() => (!searchQuery.value && !filterCategory.value && currentPage.value === 1) ? filteredList.value.filter(p => !p.pinned) : filteredList.value);
                const totalPages = computed(() => Math.ceil(regularPosts.value.length / PAGE_SIZE));
                const paginatedPosts = computed(() => regularPosts.value.slice((currentPage.value - 1) * PAGE_SIZE, currentPage.value * PAGE_SIZE));
                const categories = computed(() => [...new Set(posts.value.map(p => p.category))]);
                const relatedPosts = computed(() => posts.value.filter(p => p.category === activePost.value.category && p.file !== activePost.value.file).slice(0, 2));

                const compiledMarkdown = computed(() => {
                    let html = marked.parse(processMarkdown(markdownContent.value));
                    html = html.replace(/<li><input disabled="" type="checkbox">/g, '<li class="task-list-item"><input type="checkbox" disabled>');
                    html = html.replace(/<li><input checked="" disabled="" type="checkbox">/g, '<li class="task-list-item"><input type="checkbox" checked disabled>');
                    return html;
                });

                const loadPost = (post) => {
                    savedScrollPosition.value = window.scrollY;
                    activePost.value = post;
                    markdownContent.value = post.bodyRaw;
                    currentView.value = 'detail';
                    errorMsg.value = ''; 
                    window.scrollTo(0, 0);
                    document.title = `${post.title} - Soft Wealth`;
                    window.history.pushState({ path: `?p=${encodeURIComponent(post.file)}` }, '', `?p=${encodeURIComponent(post.file)}`);

                    nextTick(() => {
                        generateTOC(); 
                        renderMathInElement(document.querySelector('.prose'), { delimiters: [{left: "$$", right: "$$", display: true}, {left: "$", right: "$", display: false}] });
                        
                        document.querySelectorAll('pre code').forEach((el) => {
                            const pre = el.parentElement;
                            if (!pre.querySelector('.copy-btn')) {
                                const btn = document.createElement('button');
                                btn.className = 'copy-btn';
                                btn.innerText = 'Copy';
                                btn.onclick = () => { navigator.clipboard.writeText(el.innerText).then(() => { btn.innerText = 'Copied!'; setTimeout(() => btn.innerText = 'Copy', 2000); }); };
                                pre.appendChild(btn);
                            }
                        });
                        
                        document.querySelectorAll('.prose img').forEach(img => {
                            img.onclick = (e) => {
                                e.stopPropagation();
                                document.getElementById('lightbox').classList.remove('hidden');
                                document.getElementById('lightbox-img').src = img.src;
                            };
                        });
                    });
                };

                const goHome = async () => { 
                    currentView.value = 'list'; 
                    searchQuery.value = ''; 
                    activePost.value = {}; 
                    document.title = 'Soft Wealth | ËàíÈÄÇÁöÑÊêûÈí±Âì≤Â≠¶'; 
                    window.history.pushState({ path: '/' }, '', '/');
                    await nextTick();
                    window.scrollTo(0, savedScrollPosition.value);
                };

                return { currentView, pinnedPosts, regularPosts, paginatedPosts, activePost, compiledMarkdown, initLoading, searchQuery, filterCategory, categories, goHome, isDark, toggleDark, scrollProgress, scrollToContent, currentPage, totalPages, changePage, changeCategory, errorMsg, toc, scrollToHeader, activeHeader, relatedPosts, showBanner, closeBanner, showDonate, displayedText, loadPost, isTocOpen };
            }
        }).mount('#app');
    </script>
</body>
</html>
